# 3.0 migration

- Requires TypeScript v4.4 or greater, as we rely on new syntax and features.
- Dropped Node.js v10 support. Now requires v12.17 and above.
- Dropped Internet Explorer 11 support (for packages with browser code). Now requires the latest
  versions of Edge, Chrome, or Firefox.

## @boost/common

### Changed `PathResolver` to be async

The [`PathResolver`](/api/common/class/PathResolver) class and its resolve methods were synchronous
by design (only because `require.resolve()` was). Since we're moving to an "ESM first and only"
approach, we removed the `require.resolve()` compatibility and updated the resolver signature to be
async. The resolver also accepts a "starting directory" in which to resolve from.

This change will support the future `import.meta.resolve()` API, but until that lands, the class
will use the [`resolve`](npmjs.com/resolve) npm package internally.

```ts
// Before
import { PathResolver } from '@boost/common';

const resolver = new PathResolver();
const path = resolver.resolve();
```

```ts
// After
import { PathResolver } from '@boost/common';

const resolver = new PathResolver();
const path = await resolver.resolve(__dirname);
```

> If you require a synchronous API, unfortunately, you will need to implement that functionality
> yourself.

### Removed `parseFile` function

The `parseFile()` function has been removed as it partially relied on `requireModule()`, which has
also been removed (below).

However, similar functionality can be achieved with the [`json`](/api/common/namespace/json) and
[`yaml`](/api/common/namespace/yaml) serializers, or simply native `require()`.

```ts
// Before
import { parseFile } from '@boost/common';

const contents = parseFile('file.js');
const contents = parseFile('file.json');
const contents = parseFile('file.yaml');
```

```ts
// After
import { json, yaml } from '@boost/common';

const contents = require('file.js');
const contents = json.load('file.json');
const contents = yaml.load('file.yaml');
```

### Removed `requireModule` and `requireTypedModule` functions

These functions have moved to the new [`@boost/module`](../module.mdx) package.

```ts
// Before
import { requireModule } from '@boost/common';

const result = requireModule('foo');
```

```ts
// After
import { requireModule } from '@boost/module';

const result = requireModule('foo').default;
```
