<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.64">
<title data-react-helmet="true">Plugins | Boost</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Plugins | Boost"><meta data-react-helmet="true" name="description" content="Plugin based architecture that supports module loading, custom types, scopes, and more."><meta data-react-helmet="true" property="og:description" content="Plugin based architecture that supports module loading, custom types, scopes, and more."><meta data-react-helmet="true" property="og:url" content="https://boostlib.dev/docs/plugin"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.svg"><link data-react-helmet="true" rel="canonical" href="https://boostlib.dev/docs/plugin"><link rel="stylesheet" href="/styles.16ab758f.css">
<link rel="preload" href="/styles.258a4895.js" as="script">
<link rel="preload" href="/runtime~main.c839f7c1.js" as="script">
<link rel="preload" href="/main.aad79896.js" as="script">
<link rel="preload" href="/1.bebaefbd.js" as="script">
<link rel="preload" href="/2.7ed9c09b.js" as="script">
<link rel="preload" href="/27.e0fa85a5.js" as="script">
<link rel="preload" href="/28.5b51cd4f.js" as="script">
<link rel="preload" href="/935f2afb.421c7848.js" as="script">
<link rel="preload" href="/17896441.c3526068.js" as="script">
<link rel="preload" href="/026e8a07.667a79ed.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Boost"><strong class="navbar__title">Boost</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">v2</a><ul class="dropdown__menu"><li><a href="https://www.npmjs.com/package/@boost/args" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.2.0 · args</a></li><li><a href="https://www.npmjs.com/package/@boost/cli" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.1.1 · cli</a></li><li><a href="https://www.npmjs.com/package/@boost/common" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.2.1 · common</a></li><li><a href="https://www.npmjs.com/package/@boost/config" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.2.1 · config</a></li><li><a href="https://www.npmjs.com/package/@boost/debug" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.1.1 · debug</a></li><li><a href="https://www.npmjs.com/package/@boost/decorators" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.0.0 · decorators</a></li><li><a href="https://www.npmjs.com/package/@boost/event" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.1.0 · event</a></li><li><a href="https://www.npmjs.com/package/@boost/log" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.1.1 · log</a></li><li><a href="https://www.npmjs.com/package/@boost/pipeline" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.1.1 · pipeline</a></li><li><a href="https://www.npmjs.com/package/@boost/plugin" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.1.1 · plugin</a></li><li><a href="https://www.npmjs.com/package/@boost/terminal" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.1.0 · terminal</a></li><li><a href="https://www.npmjs.com/package/@boost/translate" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.1.1 · translate</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/milesj/boost" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Boost"><strong class="navbar__title">Boost</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist">v2</a><ul class="menu__list"><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/args" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.2.0 · args</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/cli" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.1.1 · cli</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/common" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.2.1 · common</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/config" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.2.1 · config</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/debug" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.1.1 · debug</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/decorators" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.0.0 · decorators</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/event" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.1.0 · event</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/log" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.1.1 · log</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/pipeline" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.1.1 · pipeline</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/plugin" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.1.1 · plugin</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/terminal" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.1.0 · terminal</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/translate" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.1.1 · translate</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs">Docs</a></li><li class="menu__list-item"><a href="https://github.com/milesj/boost" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Packages</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/args">Arguments</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/cli">CLIs</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Common utilities</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/common">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/common/contract">Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/common/path">Path</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/common/path-resolver">PathResolver</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/common/project">Project</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/crash">Crash reporting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/debug">Debugging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decorators">Decorators</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/event">Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/log">Logging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pipeline">Pipelines</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/plugin">Plugins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/terminal">Terminal utilities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/translate">Translations</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/milesj/boost/blob/master/CHANGELOG.md" target="_blank" rel="noreferrer noopener" class="menu__link">Changelog</a></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">Plugins</h1></header><div class="markdown"><span class="badgeGroup_1h1n"><span class="badge badge--warning">Backend</span><span class="badge badge--primary">Tooling</span></span><p>Plugin based architecture that supports module loading, custom types, scopes, and more.</p><h2 id="installation">Installation</h2><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1w39 tabs__item--active" style="outline:none">Yarn</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1w39" style="outline:none">NPM</li></ul><div role="tabpanel" class="margin-vert--md"><div><pre><code class="language-bash">yarn add @boost/plugin
</code></pre></div></div></div><h2 id="events">Events</h2><table><thead><tr><th>Event</th><th>Arguments</th><th>Description</th></tr></thead><tbody><tr><td><code>Registry#onAfterRegister</code></td><td><code>Plugin</code></td><td>Called after a plugin is registered.</td></tr><tr><td><code>Registry#onAfterUnregister</code></td><td><code>Plugin</code></td><td>Called after a plugin is unregistered.</td></tr><tr><td><code>Registry#onBeforeRegister</code></td><td><code>Plugin</code></td><td>Called before a plugin is registered and the <code>startup</code> life-cycle.</td></tr><tr><td><code>Registry#onBeforeUnregister</code></td><td><code>Plugin</code></td><td>Called before a plugin is unregistered and the <code>shutdown</code> life-cycle.</td></tr><tr><td><code>Registry#onLoad</code></td><td><code>string, object</code></td><td>Called after a plugin is loaded but before it&#x27;s registered.</td></tr></tbody></table><h2 id="preface">Preface</h2><p>The plugin system is comprised of 2 parts -- one for projects or libraries that want plugins, and
the other for plugin authors. <a href="#registries">Project owners</a> can integrate into the system using a
registry, which is based around the idea of loading plugins from third-party packages or file system
paths. <a href="#plugins">Plugin authors</a> can create and provide packages that register and hook into the
project.</p><p>Our system is generic and robust enough to be integrated into any and all projects, with the ability
to handle multiple plugins in parallel through configuration and setting based approaches.</p><h2 id="registries">Registries</h2><p>For project authors, we begin by defining a unique plugin type, like &quot;renderer&quot;, &quot;engine&quot;, &quot;asset&quot;,
or simply &quot;plugin&quot; if you&#x27;re not looking to be creative. We can accomplish this with the <code>Registry</code>
class, which requires a project name (used as a <a href="#naming-guidelines">package prefix and scope</a>),
plugin type name, and customizable options.</p><p>In our examples moving forward, we will use &quot;renderer&quot; as our plugin type.</p><pre><code class="language-ts">import { Registry, Pluggable } from &#x27;@boost/plugin&#x27;;

export interface Renderable&lt;T&gt; extends Pluggable&lt;T&gt; {
  render(): string | Promise&lt;string&gt;;
}

const rendererRegistry = new Registry&lt;Renderable&gt;(&#x27;boost&#x27;, &#x27;renderer&#x27;, {
  validate(plugin) {
    if (typeof plugin.render !== &#x27;function&#x27;) {
      throw new TypeError(&#x27;Renderers require a `render()` method.&#x27;);
    }
  },
});

export default rendererRegistry;
</code></pre><p>You may have noticed the <code>validate</code> option above. This option is required as it forces you to verify
a plugin being loaded or registered abides the contract you expect. In the example above, we expect
all our renderers to have a <code>render</code> method, otherwise, what would happen if an &quot;engine&quot; plugin was
passed instead? Nothing good.</p><p>Besides <code>validate</code>, the following options can be passed, all of which are optional. For more
information on life cycles, continue to the next <a href="#plugins">plugins</a> chapter.</p><ul><li><code>beforeStartup</code> (<code>async (plugin: T) =&gt; void</code>) - Callback fired before a plugin&#x27;s <code>startup</code> life
cycle is executed.</li><li><code>beforeShutdown</code> (<code>async (plugin: T) =&gt; void</code>) - Callback fired before a plugin&#x27;s <code>shutdown</code> life
cycle is executed.</li><li><code>afterStartup</code> (<code>async (plugin: T) =&gt; void</code>) - Callback fired after a plugin&#x27;s <code>startup</code> life
cycle is executed.</li><li><code>afterShutdown</code> (<code>async (plugin: T) =&gt; void</code>) - Callback fired after a plugin&#x27;s <code>shutdown</code> life
cycle is executed.</li></ul><h2 id="plugins">Plugins</h2><p>For both project owners and plugin authors, we keep talking about plugins, but what exactly is a
plugin? In the context of this system, a plugin is either a plain object, or class instance that
extends <code>Plugin</code>, with both abiding a defined contract (the <code>validate</code> option). A plugin must also
have a unique <code>name</code> property, which is typically the NPM package name.</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1w39 tabs__item--active" style="outline:none">Class</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1w39" style="outline:none">Object</li></ul><div role="tabpanel" class="margin-vert--md"><div><pre><code class="language-ts">import { Plugin } from &#x27;@boost/plugin&#x27;;
import { Renderable } from &#x27;./registry&#x27;;

export default class Renderer extends Plugin implements Renderable {
  // Using private scope
  name = &#x27;@boost/renderer-example&#x27;;

  render() {
    return &#x27;Something rendered here?&#x27;;
  }
}
</code></pre></div></div></div><p>Now why would we use a class instead of an object, as an object seems much simpler? For 2 reasons,
the 1st being that <code>Plugin</code> extends from <a href="/docs/common/contract"><code>Contract</code></a>, which allows the plugin
to inherit options through its constructor. This automatically happens when loading plugins from a
configuration file.</p><pre><code class="language-ts">import { Blueprint, Predicates } from &#x27;@boost/common&#x27;;
import { Plugin } from &#x27;@boost/plugin&#x27;;
import { Renderable } from &#x27;./registry&#x27;;

export interface RendererOptions {
  async?: boolean;
}

export default class Renderer extends Plugin&lt;unknown, RendererOptions&gt; implements Renderable {
  // ...

  blueprint({ bool }: Predicates): Blueprint&lt;RendererOptions&gt; {
    return {
      async: bool(),
    };
  }
}

// Example
const renderer = new Renderer({ async: true });
</code></pre><p>The 2nd reason is for TypeScript, as we can type our <a href="#tool-instances">tool</a> that is passed to
<a href="#life-cycles">life cycles</a> -- more specifically, the <code>Pluggable</code> type. More information on the tool
can be found in later chapters.</p><pre><code class="language-ts">import { Plugin } from &#x27;@boost/plugin&#x27;;
import { Renderable } from &#x27;./registry&#x27;;
import Tool from &#x27;./Tool&#x27;;

export default class Renderer extends Plugin&lt;Tool&gt; implements Renderable&lt;Tool&gt; {
  // ...
}
</code></pre><h3 id="priority">Priority</h3><p>After a plugin is loaded, the current plugins list is sorted based on priority. Priority is simply a
number, in ascending order, that determines the order and precedence of plugins. Priority enables
plugin authors and consumers to &quot;mark&quot; as high or low priority.</p><p>Plugin authors can set a priority using the <code>priority</code> property.</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1w39 tabs__item--active" style="outline:none">Class</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1w39" style="outline:none">Object</li></ul><div role="tabpanel" class="margin-vert--md"><div><pre><code class="language-ts">import { Plugin } from &#x27;@boost/plugin&#x27;;
import { Renderable } from &#x27;./registry&#x27;;

export default class Renderer extends Plugin implements Renderable {
  name = &#x27;@boost/renderer-example&#x27;;

  priority = 50;

  render() {
    return &#x27;Something rendered here?&#x27;;
  }
}
</code></pre></div></div></div><p>While <a href="#loading-plugins">consumers can override</a> the priority using the <code>priority</code> option.</p><pre><code class="language-ts">rendererRegistry.load(&#x27;boost-renderer-example&#x27;, {}, { priority: 50 });
</code></pre><blockquote><p>The default priority for all plugins is <code>100</code>.</p></blockquote><h3 id="life-cycles">Life cycles</h3><p>A life cycle is an optional method on a plugin that is executed at specific points in the life of a
plugin. Currently, plugins support 2 life cycles, <code>startup</code> and <code>shutdown</code>. Startup is executed
after a plugin is loaded and validated, but before it&#x27;s registered in the registry. Shutdown on the
otherhand is executed before a plugin is unregistered from the registry.</p><p>All life cycles are asynchronouse and receive a <a href="#tool-instances">tool</a> as its only argument.</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1w39 tabs__item--active" style="outline:none">Class</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1w39" style="outline:none">Object</li></ul><div role="tabpanel" class="margin-vert--md"><div><pre><code class="language-ts">import { Plugin } from &#x27;@boost/plugin&#x27;;
import { Renderable } from &#x27;./registry&#x27;;
import Tool from &#x27;./Tool&#x27;;

export default class Renderer extends Plugin&lt;Tool&gt; implements Renderable&lt;Tool&gt; {
  // ...

  async startup(tool: Tool) {
    // Do something
  }

  async shutdown(tool: Tool) {
    // Do something
  }
}
</code></pre></div></div></div><h2 id="modules">Modules</h2><p>Typically plugins are represented as an NPM package or file module for easy consumption. This
pattern is first class in Boost, but there are specific requirements to be followed. The 1st is that
all plugin modules <em>must</em> return a factory function from the default index import. Using a factory
function provides the following benefits:</p><ul><li>The return value of the factory may change without breaking the import contract.</li><li>Option objects are passed to the factory, which allows implementors to handle it however they
please.</li><li>Runtime and boostrap based logic is encapsulated within the function.</li><li>Multiple instances can be created from a single imported package.</li><li>Asynchronous aware and compatible.</li></ul><p>Using our renderer examples, we would have the following factories. One sync and the other async.</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1w39 tabs__item--active" style="outline:none">Class (async)</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1w39" style="outline:none">Object (sync)</li></ul><div role="tabpanel" class="margin-vert--md"><div><pre><code class="language-ts" metastring="title=&quot;@boost/renderer-example/src/index.ts&quot;" title="&quot;@boost/renderer-example/src/index.ts&quot;">import { Renderable } from &#x27;./registry&#x27;;
import Renderer, { RendererOptions } from &#x27;./Renderer&#x27;;

export default async function (options: RendererOptions): Renderable {
  await someProcessThatNeedsToBeAwaited();

  return new Renderer(options);
}
</code></pre></div></div></div><h3 id="naming-guidelines">Naming guidelines</h3><p>You may have noticed in the examples above that we&#x27;ve been referencing both scoped and non-scoped
package names. All plugin packages follow the format of <code>&lt;project&gt;-&lt;type&gt;-&lt;name&gt;</code> for public
third-party packages, and <code>@&lt;project&gt;/&lt;type&gt;-&lt;name&gt;</code> for official project owner packages. A 3rd
format exists for public third-party packages that exist within a scope,
<code>@&lt;scope&gt;/&lt;project&gt;-&lt;type&gt;-&lt;name&gt;</code>.</p><p>If the plugin name is &quot;example&quot;, and our project name is &quot;boost&quot;, and our plugin type is &quot;renderer&quot;,
the following package names are valid. <em>No other formats are supported.</em></p><table><thead><tr><th>Package</th><th>Name</th></tr></thead><tbody><tr><td>Private/Owner</td><td><code>@boost/renderer-example</code></td></tr><tr><td>Public</td><td><code>boost-renderer-example</code></td></tr><tr><td>Scoped public</td><td><code>@scope/boost-renderer-example</code></td></tr></tbody></table><p>All name parts should be in kebab-case and abide the official
<a href="https://github.com/npm/validate-npm-package-name">NPM package naming guidelines</a>.</p><h2 id="loading-plugins">Loading plugins</h2><p>Plugins are either asynchronously loaded from an NPM package, a relative file system path, or
explicitly passed using the <code>Registry</code> class. The <code>load()</code> method can be used to load a single
plugin, while <code>loadMany()</code> will load multiple. Loading accepts 3 different formats, which are
outlined with the examples below.</p><p>Passing a string will load based on module name or file path. Names can either be short (just the
plugin name), or in the long fully qualified form (project, type, and plugin name). When using the
short form, the loader will attempt to find both the scoped (<code>@boost/renderer-example</code>) and
non-scoped packages (<code>boost-renderer-example</code>), with scoped taking precedence.</p><pre><code class="language-ts">// Load by short module name
const renderer = await rendererRegistry.load(&#x27;foo&#x27;);

// Load by long module name with options
const renderer = await rendererRegistry.load(&#x27;boost-renderer-foo&#x27;, { async: true });

// Load by file path
const renderer = await rendererRegistry.load(&#x27;./renderers/qux.js&#x27;);
</code></pre><p>You may also load many plugins in parallel, by passing an array of module names or plugin instances,
or by passing an object of module names that map to booleans or options.</p><pre><code class="language-ts">// Load many with default options
const renderers = await rendererRegistry.loadMany([
  &#x27;foo&#x27;,
  &#x27;@boost/renderer-bar&#x27;,
  &#x27;@scope/boost-renderer-baz&#x27;,
]);

// Load many with custom options
const renderers = await rendererRegistry.loadMany({
  foo: { async: true },
  &#x27;@boost/renderer-bar&#x27;: true, // Enabled
  &#x27;@scope/boost-renderer-baz&#x27;: false, // Disabled
});
</code></pre><p>And lastly, passing a plugin object directly is also supported.</p><pre><code class="language-ts">const renderer = await rendererRegistry.load({
  name: &#x27;@scope/boost-renderer-baz&#x27;,
  render() {
    return &#x27;Hello world&#x27;;
  },
});

// Or
const renderer = await rendererRegistry.load(new Renderer());
</code></pre><p>Loaded and registered plugins should then be accessed with <code>get()</code>, <code>getMany()</code>, or <code>getAll()</code>, all
of which check based on the plugin&#x27;s <code>name</code> property.</p><pre><code class="language-ts">const renderer = rendererRegistry.get(&#x27;boost-renderer-foo&#x27;);
</code></pre><h3 id="tool-instances">Tool instances</h3><p>Most projects have a central object or class instance that powers their entire process, for
instance, Webpack has the <code>Compiler</code> and <code>Compilation</code> instances. In Boost this is called a tool (as
in developer or build tool).</p><p>Tools are optional, but when defined, they&#x27;re passed to plugin life cycles, so that plugins may
interact and integrate with them. For proper type-safety, the Tool type should be passed as a
generic to <code>Registry</code>, <code>Plugin</code>, and <code>Pluggable</code>.</p><pre><code class="language-ts">import { Registry, Pluggable, Plugin } from &#x27;@boost/plugin&#x27;;
import Tool from &#x27;./Tool&#x27;;

export interface Renderable&lt;T&gt; extends Pluggable&lt;T&gt; {
  render(): string | Promise&lt;string&gt;;
}

class Renderer&lt;T&gt; extends Plugin&lt;T&gt; implements Renderable&lt;T&gt; {}

const registry = new Registry&lt;Renderable, Tool&gt;(/* ... */);
const renderer = new Renderer&lt;Tool&gt;();
</code></pre><p>If you have a tool instance, pass the tool as an option to <code>Registry#load()</code> and
<code>Registry#loadMany()</code>.</p><pre><code class="language-ts">import Tool from &#x27;./Tool&#x27;;

const tool = new Tool();

await registry.load(&#x27;foo&#x27;, {}, { tool });
await registry.loadMany([&#x27;foo&#x27;, &#x27;bar&#x27;], { tool });
</code></pre><h3 id="configuration-files">Configuration files</h3><p>The loader methods were built to support plugins defined in <a href="/docs/config">configuration files</a>, as
this is a common use case. Take the following examples that showcase JSON and JS based
configurations.</p><pre><code class="language-json">{
  &quot;renderers&quot;: {
    &quot;foo&quot;: { &quot;async&quot;: true },
    &quot;@boost/renderer-bar&quot;: {},
    &quot;@scope/boost-renderer-baz&quot;: true
  }
}
</code></pre><pre><code class="language-js">module.exports = {
  renderers: {
    foo: { async: true },
    &#x27;@boost/renderer-bar&#x27;: {},
    &#x27;@scope/boost-renderer-baz&#x27;: true,
  },
};
</code></pre><p>And Webpack/Rollup styled configurations where plugins are instantiated manually.</p><pre><code class="language-js">import foo from &#x27;boost-renderer-foo&#x27;;
import bar from &#x27;@boost/renderer-bar&#x27;;
import baz from &#x27;@scope/boost-renderer-baz&#x27;;
import qux from &#x27;./renderers/qux&#x27;;

const barInstance = bar();
barInstance.priority = 1;

export default {
  renderers: [
    foo({ async: true }),
    barInstance,
    baz(),
    qux(),
  ],
};
</code></pre><h2 id="ecosystem">Ecosystem</h2><p>Below are a list of third-party projects and their current plugin implementations. These were used
as a basis and reference for Boost&#x27;s plugin system.</p><table><thead><tr><th>Project</th><th>Plugin pattern</th><th>Options pattern</th><th>Package names</th><th>Lifecycle events</th></tr></thead><tbody><tr><td><a href="https://github.com/jamiebuilds/babel-handbook/blob/master/translations/en/plugin-handbook.md#toc-writing-your-first-babel-plugin">Babel</a></td><td>Function that returns an object</td><td>Function argument</td><td>babel-plugin-foo, @babel/plugin-foo</td><td>pre(), post()</td></tr><tr><td><a href="https://eslint.org/docs/developer-guide/working-with-plugins">ESLint</a></td><td>Object</td><td></td><td>eslint-plugin-foo</td><td></td></tr><tr><td><a href="https://gulpjs.com/docs/en/getting-started/using-plugins">Gulp</a></td><td>Function that returns a stream</td><td>Function argument</td><td>N/A</td><td></td></tr><tr><td><a href="https://parceljs.org/asset_types.html">Parcel asset</a></td><td>Class that extends <code>Asset</code></td><td>Constructor</td><td>parcel-asset-foo,<br>@parcel/asset-foo</td><td></td></tr><tr><td><a href="https://parceljs.org/plugins.html">Parcel plugin</a></td><td>Function that binds events</td><td></td><td>parcel-plugin-foo, @parcel/plugin-foo</td><td></td></tr><tr><td><a href="https://prettier.io/docs/en/plugins.html">Prettier</a></td><td>Named exports</td><td></td><td>prettier-plugin-foo, @prettier/plugin-foo, @scope/prettier-plugin-foo</td><td></td></tr><tr><td><a href="https://rollupjs.org/guide/en/#plugins-overview">Rollup</a></td><td>Function that returns an object</td><td>Function argument</td><td>rollup-plugin-foo</td><td>Many</td></tr><tr><td><a href="https://webpack.js.org/contribute/writing-a-plugin/">Webpack</a></td><td>Stand-alone class</td><td>Constructor (implementation dependent)</td><td></td><td>apply()</td></tr><tr><td><a href="https://next.yarnpkg.com/advanced/plugin-tutorial">Yarn</a></td><td>Object with <code>factory()</code> that returns an object</td><td></td><td></td><td>factory()</td></tr></tbody></table></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/milesj/boost/edit/master/website/docs/plugin.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/pipeline"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Pipelines</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/terminal"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Terminal utilities »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link">Installation</a></li><li><a href="#events" class="table-of-contents__link">Events</a></li><li><a href="#preface" class="table-of-contents__link">Preface</a></li><li><a href="#registries" class="table-of-contents__link">Registries</a></li><li><a href="#plugins" class="table-of-contents__link">Plugins</a><ul><li><a href="#priority" class="table-of-contents__link">Priority</a></li><li><a href="#life-cycles" class="table-of-contents__link">Life cycles</a></li></ul></li><li><a href="#modules" class="table-of-contents__link">Modules</a><ul><li><a href="#naming-guidelines" class="table-of-contents__link">Naming guidelines</a></li></ul></li><li><a href="#loading-plugins" class="table-of-contents__link">Loading plugins</a><ul><li><a href="#tool-instances" class="table-of-contents__link">Tool instances</a></li><li><a href="#configuration-files" class="table-of-contents__link">Configuration files</a></li></ul></li><li><a href="#ecosystem" class="table-of-contents__link">Ecosystem</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright © 2020 Miles Johnson. Built with <a href="https://docusaurus.io/">Docusaurus</a>. Icon by <a href="https://thenounproject.com/search/?q=boost&i=1420345">Chameleon Design</a>.</div></div></div></footer></div>
<script src="/styles.258a4895.js"></script>
<script src="/runtime~main.c839f7c1.js"></script>
<script src="/main.aad79896.js"></script>
<script src="/1.bebaefbd.js"></script>
<script src="/2.7ed9c09b.js"></script>
<script src="/27.e0fa85a5.js"></script>
<script src="/28.5b51cd4f.js"></script>
<script src="/935f2afb.421c7848.js"></script>
<script src="/17896441.c3526068.js"></script>
<script src="/026e8a07.667a79ed.js"></script>
</body>
</html>