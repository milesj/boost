<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.64">
<title data-react-helmet="true">CLIs | Boost</title><meta data-react-helmet="true" name="docsearch:version" content="current,latest"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="CLIs | Boost"><meta data-react-helmet="true" name="description" content="A type-safe and interactive command line program, powered by React and Ink."><meta data-react-helmet="true" property="og:description" content="A type-safe and interactive command line program, powered by React and Ink."><meta data-react-helmet="true" property="og:url" content="https://boostlib.dev/docs/cli"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.svg"><link data-react-helmet="true" rel="canonical" href="https://boostlib.dev/docs/cli"><link rel="stylesheet" href="/styles.16ab758f.css">
<link rel="preload" href="/styles.258a4895.js" as="script">
<link rel="preload" href="/runtime~main.c839f7c1.js" as="script">
<link rel="preload" href="/main.aad79896.js" as="script">
<link rel="preload" href="/1.bebaefbd.js" as="script">
<link rel="preload" href="/2.7ed9c09b.js" as="script">
<link rel="preload" href="/27.e0fa85a5.js" as="script">
<link rel="preload" href="/28.5b51cd4f.js" as="script">
<link rel="preload" href="/935f2afb.421c7848.js" as="script">
<link rel="preload" href="/17896441.c3526068.js" as="script">
<link rel="preload" href="/ba61d949.f285eb4f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Boost"><strong class="navbar__title">Boost</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">v2</a><ul class="dropdown__menu"><li><a href="https://www.npmjs.com/package/@boost/args" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.2.0 · args</a></li><li><a href="https://www.npmjs.com/package/@boost/cli" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.1.1 · cli</a></li><li><a href="https://www.npmjs.com/package/@boost/common" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.2.1 · common</a></li><li><a href="https://www.npmjs.com/package/@boost/config" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.2.1 · config</a></li><li><a href="https://www.npmjs.com/package/@boost/debug" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.1.1 · debug</a></li><li><a href="https://www.npmjs.com/package/@boost/decorators" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.0.0 · decorators</a></li><li><a href="https://www.npmjs.com/package/@boost/event" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.1.0 · event</a></li><li><a href="https://www.npmjs.com/package/@boost/log" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.1.1 · log</a></li><li><a href="https://www.npmjs.com/package/@boost/pipeline" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.1.1 · pipeline</a></li><li><a href="https://www.npmjs.com/package/@boost/plugin" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.1.1 · plugin</a></li><li><a href="https://www.npmjs.com/package/@boost/terminal" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.1.0 · terminal</a></li><li><a href="https://www.npmjs.com/package/@boost/translate" target="_blank" rel="noopener noreferrer" class="dropdown__link" position="left">v2.1.1 · translate</a></li></ul></div><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/milesj/boost" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="Boost"><strong class="navbar__title">Boost</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" class="menu__link menu__link--sublist">v2</a><ul class="menu__list"><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/args" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.2.0 · args</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/cli" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.1.1 · cli</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/common" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.2.1 · common</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/config" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.2.1 · config</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/debug" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.1.1 · debug</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/decorators" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.0.0 · decorators</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/event" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.1.0 · event</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/log" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.1.1 · log</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/pipeline" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.1.1 · pipeline</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/plugin" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.1.1 · plugin</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/terminal" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.1.0 · terminal</a></li><li class="menu__list-item"><a href="https://www.npmjs.com/package/@boost/translate" target="_blank" rel="noopener noreferrer" class="menu__link" position="left">v2.1.1 · translate</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs">Docs</a></li><li class="menu__list-item"><a href="https://github.com/milesj/boost" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_2gpo"><div class="docSidebarContainer_3_JD" role="complementary"><div class="sidebar_2urC"><div class="menu menu--responsive menu_5FrY"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_Dm3K" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Packages</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/args">Arguments</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/cli">CLIs</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Common utilities</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/common">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/common/contract">Contract</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/common/path">Path</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/common/path-resolver">PathResolver</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/common/project">Project</a></li></ul></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/config">Configuration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/crash">Crash reporting</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/debug">Debugging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/decorators">Decorators</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/event">Events</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/log">Logging</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/pipeline">Pipelines</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/plugin">Plugins</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/terminal">Terminal utilities</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/translate">Translations</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/milesj/boost/blob/master/CHANGELOG.md" target="_blank" rel="noreferrer noopener" class="menu__link">Changelog</a></li></ul></div></div></div><main class="docMainContainer_3EyW"><div class="container padding-vert--lg docItemWrapper_1EkI"><div class="row"><div class="col docItemCol_2ASc"><div class="docItemContainer_3QWW"><article><header><h1 class="docTitle_1Lrw">CLIs</h1></header><div class="markdown"><span class="badgeGroup_1h1n"><span class="badge badge--primary">Tooling</span></span><p>A type-safe and interactive command line program, powered by <a href="https://reactjs.org/">React</a> and <a href="https://github.com/vadimdemedes/ink">Ink</a>.</p><h2 id="installation">Installation</h2><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1w39 tabs__item--active" style="outline:none">Yarn</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1w39" style="outline:none">NPM</li></ul><div role="tabpanel" class="margin-vert--md"><div><pre><code class="language-bash">yarn add @boost/cli react ink
</code></pre></div></div></div><h2 id="environment-variables">Environment variables</h2><ul><li><code>BOOSTJS_CLI_THEME</code> (<code>string</code>) - Name of the theme module (without <code>@boost</code> or <code>boost</code> prefixes)
to load for terminal style/color changes.</li></ul><h2 id="events">Events</h2><table><thead><tr><th>Event</th><th>Arguments</th><th>Description</th></tr></thead><tbody><tr><td><code>Command#onAfterRegister</code>, <code>Program#onAfterRegister</code></td><td><code>path: CommandPath, command: Commadable</code></td><td>Called after a command has been registered.</td></tr><tr><td><code>Command#onBeforeRegister</code>, <code>Program#onBeforeRegister</code></td><td><code>path: CommandPath, command: Commadable</code></td><td>Called before a command has been registered.</td></tr><tr><td><code>Program#onAfterRender</code></td><td></td><td>Called after a component has rendered.</td></tr><tr><td><code>Program#onAfterRun</code></td><td><code>error?: Error</code></td><td>Called after the program and command have been ran.</td></tr><tr><td><code>Program#onBeforeRender</code></td><td><code>result: RunResult</code></td><td>Called after a command has run but before a component will render.</td></tr><tr><td><code>Program#onBeforeRun</code></td><td><code>argv: Argv</code></td><td>Called before the program and command will run.</td></tr><tr><td><code>Program#onCommandFound</code></td><td><code>argv: Argv, path: CommandPath, command: Commadable</code></td><td>Called when a command has been found after parsing argv.</td></tr><tr><td><code>Program#onCommandNotFound</code></td><td><code>argv: Argv, path: CommandPath</code></td><td>Called when a command wasn&#x27;t found after parsing argv.</td></tr><tr><td><code>Program#onExit</code></td><td><code>message: string, code: number</code></td><td>Called when the <code>exit()</code> handler is executed but before the process exits.</td></tr><tr><td><code>Program#onHelp</code></td><td><code>CommandPath?</code></td><td>Called when the help menu is rendered.</td></tr></tbody></table><h2 id="cli">CLI</h2><p>The CLI provides a simple object oriented framework for building and managing command line programs,
with clear separation of commands, middleware, args, a program instance, and more. It further
streamlines the development process by utilizing <a href="https://github.com/vadimdemedes/ink">Ink</a> for terminal rendering, as manually
handling ANSI escape sequences and terminal widths can be tedious and complicated.</p><blockquote><p>The CLI makes heavy usage of the <a href="/docs/args">args</a> package, which will be continually referenced
throughout this documentation. It&#x27;s encouraged to read and understand it first.</p></blockquote><h2 id="program">Program</h2><p>The entry point of the command line is commonly referred to as the binary, or script, and is managed
by the <code>Program</code> class. This class handles the registration of commands, applying
<a href="#middleware">middleware</a> to argv (<code>process.argv</code>), parsing argv into <a href="/docs/args">arguments</a>
(options, flags, etc), running the found command with these argument, outputing to the terminal, and
finally cleaning up or handling failures.</p><p>Begin by importing and instantiating the <code>Program</code> class, while passing required and optional
options.</p><ul><li><code>banner</code> (<code>string</code>) - A large banner to appear at the top of the index help interface.</li><li><code>bin</code> (<code>string</code>) - The name of the binary consumers enter on the command line. Must be in
kebab-case. <em>(Required)</em></li><li><code>delimiter</code> (<code>string</code>) - The character(s) displayed before command line usage examples.</li><li><code>footer</code> (<code>string</code>) - A string of text to display at the bottom of the index help interface.</li><li><code>header</code> (<code>string</code>) - A string of text to display at the top of the index help interface, below
the banner (if present).</li><li><code>name</code> (<code>string</code>) - A human readable name for your program. <em>(Required)</em></li><li><code>version</code> (<code>string</code>) - Current version of your CLI program. Typically the version found in your
<code>package.json</code>. This is output when <code>--version</code> is passed. <em>(Required)</em></li></ul><pre><code class="language-ts">import { Program } from &#x27;@boost/cli&#x27;;
import pkg from &#x27;./package.json&#x27;;

const program = new Program({
  bin: &#x27;boost&#x27;,
  footer: &#x27;Documentation: https://boostlib.dev&#x27;,
  name: &#x27;Boost Examples&#x27;,
  version: pkg.version,
});
</code></pre><p><img alt="Program example" src="/assets/images/program-009fb9f110627dae066bbe6d43fe19fe.png"></p><p>Once <a href="#commands">commands</a> and optional <a href="#middleware">middleware</a> have been registered, you must run
the program with <code>Program#run()</code> or <code>Program#runAndExit()</code>, with the latter automatically passing
the exit code to <code>process.exitCode</code>. Both methods require an argv list to run.</p><pre><code class="language-ts">program.runAndExit(process.argv);
</code></pre><h3 id="package-integration">Package integration</h3><p>Now that you have the basics of a program, you can set the
<a href="https://docs.npmjs.com/files/package.json#bin">bin</a> field in your <code>package.json</code>. This should point
to the program-aware file you have defined previously. For example, if my program will be called
<code>boost</code>.</p><pre><code class="language-json">{
  &quot;bin&quot;: {
    &quot;boost&quot;: &quot;./bin/boost.js&quot;
  }
}
</code></pre><p>If you&#x27;re writing your program in TypeScript, or non-Node compatible JavaScript, you&#x27;ll need to
down-level compile before releasing your package. A simple alternative approach is to point your
binary file to where the compiled program would be found.</p><pre><code class="language-js" metastring="title=&quot;bin/boost.js&quot;" title="&quot;bin/boost.js&quot;">#!/usr/bin/env node

require(&#x27;../lib/program.js&#x27;);
</code></pre><h3 id="stand-alone">Stand-alone</h3><p>Boost offers 2 implementations for how the binary can be executed, the 1st is known as a stand-alone
program. This implementation only supports 1 <a href="#commands">command</a> known as the default command,
which is immediately ran when the binary is. It does not support sub-commands.</p><p>To create a stand-alone binary, create and instantiate a command, then pass it to
<code>Command#default()</code>. The command&#x27;s <code>path</code> is ignored for this situation.</p><pre><code class="language-ts">import { Program } from &#x27;@boost/cli&#x27;;
import StandAloneCommand from &#x27;./commands/StandAloneCommand&#x27;;

const program = new Program({
  // ...
});

program.default(new StandAloneCommand()).runAndExit(process.argv);
</code></pre><blockquote><p>Some good examples of stand-alone binaries are <code>babel</code>, <code>webpack</code>, and <code>tsc</code>.</p></blockquote><h3 id="multi-command">Multi-command</h3><p>The 2nd implementation is opposite the stand-alone program, and is known as a multi-command program.
When the binary is ran, and no arguments are passed, a help menu is displayed instead of executing
the default command. Otherwise, if arguments <em>are</em> passed, a registered command will be ran based on
matching path name.</p><p>To create a multi-command binary, create and instantiate multiple commands, and pass them all to
<code>Command#register()</code>. In the example below, the <code>boost</code> binary would support the <code>boost install</code>,
<code>boost uninstall</code>, and <code>boost build</code> commands.</p><pre><code class="language-ts">import { Program } from &#x27;@boost/cli&#x27;;
import InstallCommand from &#x27;./commands/InstallCommand&#x27;;
import UninstallCommand from &#x27;./commands/UninstallCommand&#x27;;
import BuildCommand from &#x27;./commands/BuildCommand&#x27;;

const program = new Program({
  // ...
});

program
  .register(new InstallCommand())
  .register(new UninstallCommand())
  .register(new BuildCommand())
  .runAndExit(process.argv);
</code></pre><blockquote><p>Some good examples of stand-alone binaries are <code>npm</code>, <code>yarn</code>, and <code>docker</code>.</p></blockquote><h3 id="middleware">Middleware</h3><p>Boost will parse provided argv (a list of string arguments, typically from <code>process.argv</code>) into
<a href="https://www.npmjs.com/package/@boost/args">args</a> (an object of options, flags, params, etc) for easier consumption. This process can be
intercepted with <code>Program#middleware()</code>, which allows both argv and args to be read and mutated.</p><p>Middleware is a function, that receives the argv list as the 1st argument, and a parse callback as
the 2nd argument. It <em>must</em> return an args object, which can be built by executing the parse
callback. This allows both before, middle, and after implementations to be possible, as demonstrated
below.</p><pre><code class="language-ts">import { Program, Middleware } from &#x27;@boost/cli&#x27;;

const example: Middleware = (argv, parse) =&gt; {
  if (argv.includes(&#x27;--help&#x27;)) {
    argv.push(&#x27;--all&#x27;);
  }

  return parse();
};

const program = new Program({
  // ...
});

program
  // Function reference
  .middleware(example)
  // Inline async function
  .middleware(async (argv, parse) =&gt; {
    const args = await parse();

    args.options.flag = true;

    return args;
  })
  .runAndExit(process.argv);
</code></pre><p>Middleware is async, so the parse callback <em>must be</em> awaited! This also means you can implement your
own async functionality, like file system access, or network requests.</p><h2 id="commands">Commands</h2><p>Commands are self-encapsulated pieces of business logic that are ran when a matching path (a unique
argument) is found on the command line. To create a command, import and extend the abstract
<code>Command</code> class, and implement a <code>run()</code> method. This method can be async and even render
<a href="#rendering-components">React components</a>!</p><pre><code class="language-ts">import { Command } from &#x27;@boost/cli&#x27;;

export default class BuildCommand extends Command {
  async run() {
    this.log(&#x27;Starting process...&#x27;);

    await runHeavyAsyncProcess();

    this.log(&#x27;Process finished!&#x27;);
  }
}
</code></pre><p>However, that&#x27;s not all required, as a command and it&#x27;s features must be configured! Features may be
defined with a declarative approach using TypeScript decorators, or an imperative approach with
static class properties. Both variants will be demonstrated in the examples below.</p><h3 id="config">Config</h3><p>All commands support the following metadata configuration, with <code>path</code> and <code>description</code> being
mandatory.</p><ul><li><code>aliases</code> (<code>string[]</code>) - A list of aliased paths. Will not show up in the help menu, but will
match on the command line.</li><li><code>allowUnknownOptions</code> (<code>boolean</code>) - Allow <a href="/docs/args#unknown-options">unknown options</a> to be
parsed, otherwise an error is thrown. Defaults to <code>false</code>.</li><li><code>allowVariadicParams</code> (<code>boolean</code>) - Allow <a href="/docs/args#variadic-params">variadic params</a> to be
parsed, otherwise an error is thrown. Defaults to <code>false</code>.</li><li><code>categories</code> (<code>object</code>) - A mapping of sub-command and option <a href="#categories">categories</a> for this
command only. <a href="#global-options">Global options</a> are automatically defined under the <code>global</code>
category.</li><li><code>category</code> (<code>string</code>) - The category this command belongs to. Will be used to group in the parent
command or program. Defaults to no category.</li><li><code>deprecated</code> (<code>boolean</code>) - Whether the command is deprecated or not. Will display a tag in the
help menu. Defaults to <code>false</code>.</li><li><code>description</code> (<code>string</code>) - A description of what the command is and does. Supports basic markdown
for bold, italics, and underline. <em>(Required)</em></li><li><code>hidden</code> (<code>boolean</code>) - Whether the command should be hidden from the help menu or not. Will still
match on the command line. Defaults to <code>false</code>.</li><li><code>path</code> (<code>string</code>) - A unique name in which to match the command on the command line amongst a list
of arguments (argv). <em>(Required)</em></li><li><code>usage</code> (<code>string | string[]</code>) - Define one or many usage examples to display in the help menu.</li></ul><p>When using decorators, import the <code>Config</code> decorator and apply it to the <code>Command</code> class. The path
and description are required, while all other metadata can be passed as an object. Otherwise, just
define static class properties of the same name!</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1w39 tabs__item--active" style="outline:none">Declarative</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1w39" style="outline:none">Imperative</li></ul><div role="tabpanel" class="margin-vert--md"><div><pre><code class="language-ts">import { Command, Config } from &#x27;@boost/cli&#x27;;

@Config(&#x27;build&#x27;, &#x27;Build a project&#x27;, {
  aliases: [&#x27;make&#x27;],
  deprecated: true,
})
export default class BuildCommand extends Command {}
</code></pre></div></div></div><p><img alt="Command example" src="/assets/images/command-a48cc120cfb60e1492d3ce9ad6915909.png"></p><h3 id="options">Options</h3><p><a href="/docs/args#options">Options</a> are optional arguments that accept a value on the command line. When a
command is ran, each option is set as a class property based on the matching command line value, or
the provided default value. Like configuration above, options can be defined declaratively or
imperatively, with option types being passed to the 1st <code>Command</code> generic slot.</p><p><em>Declarative</em>: There are 5 <code>Arg</code> decorators to choose from when defining options, all of which are
defined on a class property, where the property name becomes the option name. For example, a
property of <code>save</code> would become the <code>--save</code> option. Depending on the decorator, they support many
<a href="/docs/args#options">option settings</a>, excluding <code>type</code> and <code>description</code>, which are inferred, and
<code>default</code> which comes from the property value.</p><p><em>Imperative</em>: If you prefer to use static properties, all options are defined through the single
static <code>options</code> property, which requires a mapping of option names to
<a href="/docs/args#options">option settings</a>. With this approach, <code>type</code> and <code>description</code> are required,
with <code>default</code> either being configured with a setting, or coming from the class property value. For
easier type safety, the <code>Options</code> collection type can be used to type the static property.</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1w39 tabs__item--active" style="outline:none">Declarative</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1w39" style="outline:none">Imperative</li></ul><div role="tabpanel" class="margin-vert--md"><div><pre><code class="language-ts">import { Command, Arg, GlobalOptions } from &#x27;@boost/cli&#x27;;

interface CustomOptions extends GlobalOptions {
  flag: boolean;
  number: number;
  numbers: number[];
  string: string;
  strings: string[];
}

export default class CustomCommand extends Command&lt;CustomOptions&gt; {
  @Arg.Flag(&#x27;Boolean flag&#x27;)
  flag: boolean = false;

  @Arg.Number(&#x27;Single number&#x27;, { count: true, short: &#x27;N&#x27; })
  number: number = 0;

  @Arg.Numbers(&#x27;List of numbers&#x27;, { deprecated: true })
  numbers: number[] = [];

  @Arg.String(&#x27;Single string&#x27;, { choices: [&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;], hidden: true })
  string: string = &#x27;&#x27;;

  @Arg.Strings(&#x27;List of strings&#x27;, { arity: 5, short: &#x27;S&#x27; })
  strings: string[] = [];

  run() {
    const { flag, strings } = this;

    // ...
  }
}
</code></pre></div></div></div><p><img alt="Options example" src="/assets/images/options-6bdfd8c724ac6edc617388246ccad48b.png"></p><h4 id="unknown-options">Unknown options</h4><p>By default, unknown options are not allowed and will throw an error. To allow, set the
<code>allowUnknownOptions</code> <a href="#config">configuration setting</a> to true. When enabled, all unknown options
will be set as a string object to the <code>Command#unknown</code> class property.</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1w39 tabs__item--active" style="outline:none">Declarative</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1w39" style="outline:none">Imperative</li></ul><div role="tabpanel" class="margin-vert--md"><div><pre><code class="language-ts">import { Command, GlobalOptions, Config } from &#x27;@boost/cli&#x27;;

@Config(&#x27;custom&#x27;, &#x27;Example&#x27;, { allowUnknownOptions: true })
export default class CustomCommand extends Command&lt;GlobalOptions&gt; {
  run() {
    const { foo, bar } = this.unknown;
    // ...
  }
}
</code></pre></div></div></div><p><img alt="Unknown option example" src="/assets/images/unknown-option-c38449a72c1b6205d54817265c084afc.png"></p><h4 id="global-options">Global options</h4><p>Boost provides the follow options that are always available to all commands.</p><ul><li><code>--help</code>, <code>-h</code> (<code>boolean</code>) - Displays a help menu for the chosen command or the program itself.
Available under the <code>help</code> class property.</li><li><code>--locale</code> (<code>string</code>) - Display errors, messages, and the interface in the chosen locale (if
supported). Locale must be in the format of &quot;en&quot; or &quot;en-US&quot;. Available under the <code>locale</code> class
property.</li><li><code>--version</code>, <code>-v</code> (<code>boolean</code>) - Display the current program version and exit. Available under the
<code>version</code> class property.</li></ul><h3 id="params">Params</h3><p><a href="/docs/args#params">Params</a> are command line values that will be passed to <code>Command#run()</code> as
arguments. When defining params, all <a href="/docs/args#params">param settings</a> are supported, and required
are mandatory. Param types are passed to the 2nd <code>Command</code> generic slot.</p><p><em>Declarative</em>: When using decorators, the <code>Arg.Params</code> decorator must be defined on the
<code>Command#run()</code> method. It accepts an argument for each param you want to configure, in the order
they should be expected.</p><p><em>Imperative</em>: If you prefer to use static properties, all params are defined through the single
static <code>params</code> property, which requires an array of <a href="/docs/args#params">param settings</a>. For easier
type safety, the <code>Params</code> collection type can be used to type the static property.</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1w39 tabs__item--active" style="outline:none">Declarative</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1w39" style="outline:none">Imperative</li></ul><div role="tabpanel" class="margin-vert--md"><div><pre><code class="language-ts">import { Command, Arg, GlobalOptions } from &#x27;@boost/cli&#x27;;

type CustomParams = [string, number, boolean];

export default class CustomCommand extends Command&lt;GlobalOptions, CustomParams&gt; {
  @Arg.Params&lt;CustomParams&gt;(
    {
      description: &#x27;String&#x27;,
      label: &#x27;name&#x27;,
      required: true,
      type: &#x27;string&#x27;,
    },
    {
      default: 18,
      description: &#x27;Number&#x27;,
      label: &#x27;age&#x27;,
      type: &#x27;number&#x27;,
    },
    {
      description: &#x27;Boolean&#x27;,
      label: &#x27;active&#x27;,
      type: &#x27;boolean&#x27;,
    },
  )
  run(name: string, age: number, active: boolean) {
    // ...
  }
}
</code></pre></div></div></div><p><img alt="Params example" src="/assets/images/params-656c1710ddbe411e6fc7851a1ac2630b.png"></p><h4 id="variadic-params">Variadic params</h4><p>By default, variadic params are not enabled and will throw an error when an unconfigured param is
found. To allow, set the <code>allowVariadicParams</code> <a href="#config">configuration setting</a> to true. When
enabled, all extra params will spread onto the end of the <code>Command#run()</code> method as strings.</p><p>Using the example above, it would look like the following.</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1w39 tabs__item--active" style="outline:none">Declarative</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1w39" style="outline:none">Imperative</li></ul><div role="tabpanel" class="margin-vert--md"><div><pre><code class="language-ts">import { Command, Config, Arg, GlobalOptions } from &#x27;@boost/cli&#x27;;

type CustomParams = [string, number];

@Config(&#x27;custom&#x27;, &#x27;Example&#x27;, { allowVariadicParams: true })
export default class CustomCommand extends Command&lt;GlobalOptions, CustomParams&gt; {
  @Arg.Params&lt;CustomParams&gt;([
    // ...
  ])
  run(name: string, age: number, ...params: string[]) {
    // ...
  }
}
</code></pre></div></div></div><p><img alt="Variadic params example" src="/assets/images/variadic-params-0c7270791d792ad80223d084b397c511.png"></p><h3 id="rest-args">Rest args</h3><p><a href="/docs/args#rest-args">Rest arguments</a> are all arguments that come after a standalone <code>--</code>
delimiter, and can be accessed using the <code>Command#rest</code> property, which is an array of strings.</p><h3 id="sub-commands">Sub-commands</h3><p>Of course commands can register their own commands, known as sub-commands -- it&#x27;s commands all the
way down! Sub-commands are configured exactly the same, with the key difference being that their
path must be prefixed with their parent command&#x27;s path, separated by a colon.</p><p>For example, say we have a scaffolding command, where each sub-command is the specific template to
generate. The parent path would be <code>scaffold</code>, where a child would be <code>scaffold:model</code>,
<code>scaffond:controller</code>, so on and so forth. You can see this in action below.</p><pre><code class="language-ts">import { Command, Config } from &#x27;@boost/cli&#x27;;

@Config(&#x27;scaffold:controller&#x27;, &#x27;Scaffold a controller&#x27;)
class ScaffoldControllerCommand extends Command {}

@Config(&#x27;scaffold:model&#x27;, &#x27;Scaffold a model&#x27;)
class ScaffoldModelCommand extends Command {}

@Config(&#x27;scaffold&#x27;, &#x27;Scaffold a template&#x27;)
class ScaffoldCommand extends Command {
  constructor() {
    super();

    this.register(new ScaffoldControllerCommand());
    this.register(new ScaffoldModelCommand());
  }
}
</code></pre><p>Sub-commands can now be executed on the command line by passing their full path, like so:
<code>boost scaffold:model --name User</code>.</p><p><img alt="Sub-commands example" src="/assets/images/subcommands-292639c856ef1ee95f1a5a849b9b2c58.png"></p><h3 id="rendering-components">Rendering components</h3><p>This chapter assumes you have knowledge of <a href="https://reactjs.org/">React</a>, JSX/TSX, and <a href="https://github.com/vadimdemedes/ink">Ink</a>. If you do not,
it&#x27;s highly encouraged to study those topics, but React is not necessarily a requirement (can use
<a href="#logging">logging</a>). With that being said, return React elements from <code>Command#run()</code> to render the
component output to the CLI.</p><p>For a quick demonstration, let&#x27;s implement a component that writes to a file asynchronously.</p><pre><code class="language-tsx">import fs from &#x27;fs&#x27;;
import React, { useState, useEffect } from &#x27;react&#x27;;
import { Box, Text } from &#x27;ink&#x27;;
import { Style, ProgramContext } from &#x27;@boost/cli&#x27;;

interface WriteConfigProps {
  data: object;
  path: string;
}

export default function WriteConfig({ data, path }: WriteConfigProps) {
  const { exit } = useContext(ProgramContext);
  const [loading, setLoading] = useState(true);

  useEffect(() =&gt; {
    fs.promises
      .writeFile(path, JSON.stringify(data), &#x27;utf8&#x27;)
      .then(() =&gt; {
        setLoading(false);
      })
      .catch((error) =&gt; {
        exit(error.message);
      });
  }, [path]);

  if (loading) {
    return (
      &lt;Box&gt;
        &lt;Text&gt;Writing config file...&lt;/Text&gt;
      &lt;/Box&gt;
    );
  }

  return (
    &lt;Box&gt;
      &lt;Text&gt;
        Wrote config to file &lt;Style type=&quot;success&quot;&gt;{path}&lt;/Style&gt;
      &lt;/Text&gt;
    &lt;/Box&gt;
  );
}
</code></pre><p>Then we implement the command that returns and renders the component.</p><pre><code class="language-tsx">import { Command, Config, Arg } from &#x27;@boost/cli&#x27;;
import WriteConfig from &#x27;./components/WriteConfig&#x27;;

@Config(&#x27;config&#x27;, &#x27;Manage configuration files&#x27;)
export default class ConfigCommand extends Command {
  @Arg.Params({
    description: &#x27;Path to file&#x27;,
    type: &#x27;string&#x27;,
    required: true,
  })
  async run(path: string) {
    const data = await loadConfigFromSomeSource();

    return &lt;WriteConfig data={data} path={path} /&gt;;
  }
}
</code></pre><h3 id="shorthand-registration">Shorthand registration</h3><p>Sometimes classes may be overkill for commands, so Boost offers a feature known as shorthand
commands, where only objects and functions are used. To utilize shorthand commands, call either the
<code>Program#register()</code> or <code>Command#register()</code> methods, with a unique path, settings object (config,
options, params, etc)), and run function.</p><pre><code class="language-ts">import { Program, TaskContext } from &#x27;@boost/cli&#x27;;

interface BuildOptions {
  minify: boolean;
}

type BuildParams = [string];

program.register&lt;BuildOptions, BuildParams&gt;(
  &#x27;build&#x27;,
  {
    description: &#x27;Build a project&#x27;,
    options: {
      minify: { description: &#x27;Minify source files&#x27;, type: &#x27;boolean&#x27; },
    },
    params: [
      { description: &#x27;Name of project&#x27;, label: &#x27;name&#x27;, type: &#x27;string&#x27; }
    ]
  },
  function build(this: TaskContext, options: BuildOptions, params: BuildParams, rest: string[]) =&gt; {
    // ...
  },
);
</code></pre><p>Besides a different API, the arguments to the run function are also different. Instead of spread
params like in a class, they are an options object, list of params, and list of rest arguments
respectively.</p><blockquote><p>If you want to access the <a href="#logging">logger</a>, be sure to use a function declaration instead of an
anonymous function, so that context binding works correctly!</p></blockquote><h2 id="tasks">Tasks</h2><p>Tasks are reusable functions that can be executed within any command, while gaining contextual and
limited access to that command&#x27;s instance. This promotes reusability and composition while avoiding
inheritance related issues.</p><p>To use a task, create a function with any arguments and function body that you&#x27;d like. The function
body has access to the parent command&#x27;s <a href="#options">options</a>, <a href="#logging">logger</a>, and
<a href="#rest-args">rest arguments</a> through <code>this</code>. If using TypeScript, the <code>this</code> special argument should
be typed.</p><pre><code class="language-ts">import fs from &#x27;fs&#x27;;
import { TaskContext } from &#x27;@boost/cli&#x27;;

// Write a JSON blob to a file defined by a --path option
export default async function writeJson(
  this: TaskContext&lt;{ path: string }&gt;,
  data: unknown,
  pretty: boolean = false,
) {
  await fs.promises.writeFile(
    this.path,
    pretty ? JSON.stringify(data, null, 2) : JSON.stringify(data),
    &#x27;utf8&#x27;,
  );

  this.log(&#x27;Wrote file to %s&#x27;, this.path);
}
</code></pre><p>Now that are task is created, we can now execute it within a command using <code>Command#runTask()</code>. This
method requires the task as a function reference, and all it&#x27;s required arguments.</p><pre><code class="language-ts">import { Command, Config, Arg } from &#x27;@boost/cli&#x27;;
import writeJson from &#x27;./tasks/writeJson&#x27;;

@Config(&#x27;init&#x27;, &#x27;Initialize project&#x27;)
export default class InitCommand extends Command {
  @Arg.String(&#x27;Path to config file&#x27;)
  path: string;

  async run() {
    const data = await loadConfigFromSomeSource();

    await this.runTask(writeJson, data);
  }
}
</code></pre><blockquote><p>Tasks are a command only feature and cannot be executed from within a React component.</p></blockquote><h2 id="categories">Categories</h2><p>Categories are a mechanism for grouping commands and options in the help menu for easier
readability. They&#x27;re shared between both commands and options for interoperability purposes, and can
be defined globally with <code>Program#categories()</code>, or per command through
<a href="#config"><code>categories</code> configuration</a>. To make use of categories, define a mapping of keys to
category names and optional weights, like so.</p><pre><code class="language-ts">program.categories({
  // Explicit weight
  cache: {
    name: &#x27;Caching&#x27;,
    weight: 60,
  },

  // Automatic weight
  error: &#x27;Error handling&#x27;,
});
</code></pre><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1w39 tabs__item--active" style="outline:none">Declarative</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1w39" style="outline:none">Imperative</li></ul><div role="tabpanel" class="margin-vert--md"><div><pre><code class="language-ts">import { Command, Config } from &#x27;@boost/cli&#x27;;

@Config(&#x27;custom&#x27;, &#x27;Example&#x27;, {
  categories: {
    cache: {
      name: &#x27;Caching&#x27;,
      weight: 60,
    },
    error: &#x27;Error handling&#x27;,
  },
})
export default class CustomCommand extends Command {
  // ...
}
</code></pre></div></div></div><p>Categories are sorted by weight first, then alphabetical second, so define <code>weight</code> when you want
strict control of the category order. Uncategorized items have a weight of <code>0</code>, and the built-in
globals have a weight of <code>100</code>.</p><p>Now that categories have been defined, be sure to set the category on your commands and options
using the <code>category</code> setting! Here&#x27;s an example using decorators.</p><div><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_1w39 tabs__item--active" style="outline:none">Declarative</li><li role="tab" tabindex="0" aria-selected="false" class="tabs__item tabItem_1w39" style="outline:none">Imperative</li></ul><div role="tabpanel" class="margin-vert--md"><div><pre><code class="language-ts">import { Command, Config, Arg, GlobalOptions } from &#x27;@boost/cli&#x27;;

interface BuildOptions extends GlobalOptions {
  cache: boolean;
}

@Config(&#x27;build&#x27;, &#x27;Build a project&#x27;, { category: &#x27;build&#x27; })
export default class BuildCommand extends Command&lt;BuildOptions&gt; {
  @Arg.Flag(&#x27;Write output to cache&#x27;, { category: &#x27;cache&#x27; })
  cache: boolean = false;

  // ...
}
</code></pre></div></div></div><h2 id="logging">Logging</h2><p>Boost integrates its very own <a href="/docs/log">logger</a> so that logs can easily be sent to the configured
<code>stdout</code> and <code>stderr</code>. The logger is accessible using <code>Command#log()</code> and associated methods.</p><pre><code class="language-ts">import { Command } from &#x27;@boost/cli&#x27;;

class CustomCommand extends Command {
  run() {
    this.log(&#x27;Normal log&#x27;);
    this.log.error(&#x27;Failed log&#x27;);
    this.log.debug(&#x27;Debug log&#x27;);
    // ...
  }
}
</code></pre><p>The logger is also accessible within a component by using the <code>ProgramContext</code>, like so.</p><pre><code class="language-tsx">import React, { useContext } from &#x27;react&#x27;;
import { Box } from &#x27;ink&#x27;;
import { ProgramContext } from &#x27;@boost/cli&#x27;;

function CustomComponent() {
  const { log } = useContext(ProgramContext);

  log(&#x27;Normal log&#x27;);
  log.error(&#x27;Failed log&#x27;);
  log.debug(&#x27;Debug log&#x27;);
  // ...

  return &lt;Box&gt;Loading...&lt;/Box&gt;;
}
</code></pre><blockquote><p>It&#x27;s highly encouraged to use the logger instead of the native console, so that logged messages do
not interrupt the React rendering process, and write to the configured streams!</p></blockquote><h2 id="themes">Themes</h2><p>Themes allow consumers to alter the color of text and backgrounds for elements rendered with the
<code>Style</code> component. Themes are simply NPM modules that return an object of hexcodes or ANSI colors,
and can be enabled by defining the <code>BOOSTJS_CLI_THEME</code> environment variable.</p><pre><code class="language-bash">BOOSTJS_CLI_THEME=nyan &lt;program&gt;
</code></pre><p>When defining a theme, we&#x27;ll attempt to load from <code>@boost/theme-&lt;name&gt;</code> or <code>boost-theme-&lt;name&gt;</code>,
otherwise we throw an error. Third-party modules are currently not supported.</p><h2 id="components">Components</h2><p>Boost provides the following components for use within your programs.</p><h3 id="style"><code>Style</code></h3><p>The <code>Style</code> component is special in that it renders and applies colors based on the
<a href="#themes">chosen theme</a>. It accomplishes this through the <code>type</code> prop, which accepts one of the
theme palette names.</p><pre><code class="language-tsx">import { Style } from &#x27;@boost/cli&#x27;;

&lt;Style type=&quot;success&quot;&gt;Downloaded 123 packages&lt;/Style&gt;;
</code></pre><p>Furthermore, it also supports text styling similar to Ink&#x27;s <code>Text</code> component. This uses
<a href="https://www.npmjs.com/package/chalk">chalk</a> under the hood.</p><pre><code class="language-tsx">&lt;Style bold type=&quot;failure&quot;&gt;
  Faild to download packages
&lt;/Style&gt;
</code></pre><blockquote><p>It&#x27;s highly encouraged to use this component for all color based styling, so that consumers can
always use their chosen theme!</p></blockquote><h3 id="header"><code>Header</code></h3><p>The <code>Header</code> component is simply that, a header! It renders an inverted background, with bold and
uppercased text, and appropriate margins. It&#x27;s what the <a href="#help">help</a> and <a href="#failure">failure</a> menus
use to separate and denote sections.</p><pre><code class="language-tsx">import { Header } from &#x27;@boost/cli&#x27;;

&lt;Header label=&quot;About&quot; /&gt;;
</code></pre><p>Headers can also be <a href="#style">styled</a> by providing a <code>type</code> prop, which will color the background.</p><h3 id="help"><code>Help</code></h3><p>The <code>Help</code> component can be used to render elegant command usage and help menus. It&#x27;s a very complex
component that supports everything from command metadata to variadic params, all through the
following props (all optional).</p><ul><li><code>categories</code> (<code>{ [name: string]: Category }</code>) - Mapping of <a href="#categories">categories</a> to use for
command and option grouping.</li><li><code>config</code> (<code>CommandConfig</code>) - <a href="#config">Configuration</a> metadata about the current command.</li><li><code>commands</code> (<code>{ [path: string]: CommandConfig }</code>) - Mapping of <a href="#sub-commands">commands</a>, typically
sub-commands.</li><li><code>header</code> (<code>string</code>) - A <a href="#header">header</a> to display at the top of the output.</li><li><code>options</code> (<code>{ [name: string]: OptionConfig }</code>) - Mapping of <a href="#options">options</a>.</li><li><code>params</code> (<code>ParamConfig[]</code>) - List of <a href="#params">params</a>.</li></ul><pre><code class="language-tsx">import { Help } from &#x27;@boost/cli&#x27;;

&lt;Help
  header=&quot;Info&quot;
  config={{ description: &#x27;This is a very cool program&#x27;, deprecated: true }}
  params={[
    {
      description: &#x27;Name&#x27;,
      type: &#x27;string&#x27;,
    },
  ]}
/&gt;;
</code></pre><h3 id="failure"><code>Failure</code></h3><p>The <code>Failure</code> component can be used to render a beautiful failure menu, for an error and its stack
trace. The <code>error</code> prop must be provided with an <code>Error</code> instance. An optional <code>warnings</code> prop can
be provided with a list of <code>Error</code>s, for displaying minor issues without a stack trace.</p><pre><code class="language-tsx">import { Failure } from &#x27;@boost/cli&#x27;;

&lt;Failure error={new Error(&#x27;Something is broken!&#x27;)} /&gt;;
</code></pre><h2 id="test-utilities">Test utilities</h2><p>The following <a href="https://github.com/facebook/jest">Jest</a> utilities are available in the
<code>@boost/cli/lib/testing</code> module.</p><h3 id="mockstreams"><code>mockStreams</code></h3><blockquote><p>mockStreams(): ProgramStreams</p></blockquote><p>Returns mocked <code>stderr</code>, <code>stdout</code>, and <code>stdin</code> streams that can be passed to a <code>Program</code>. This does
not mock all stream functionality, only those required by Boost and Ink.</p><pre><code class="language-ts">import { mockStreams } from &#x27;@boost/cli/lib/testing&#x27;;

const streams = mockStreams();
</code></pre><h3 id="mockprogram"><code>mockProgram</code></h3><blockquote><p>mockProgram(options?: ProgramOptions, streams?: ProgramStreams): Program</p></blockquote><p>Returns a <code>Program</code> instance with required options pre-filled and streams mocked (unless manually
provided).</p><pre><code class="language-ts">import { mockProgram } from &#x27;@boost/cli/lib/testing&#x27;;

const program = mockProgram({ name: &#x27;Example&#x27; });
</code></pre><h3 id="rendercomponent"><code>renderComponent</code></h3><blockquote><p>async renderComponent(element: React.ReactElement, stripped?: boolean): Promise&lt;string&gt;</p></blockquote><p>Can be used to render a React component with Ink and return the rendered result as a terminal
compatible string. If <code>stripped</code> is true, it will strip ANSI escape escape sequences.</p><pre><code class="language-tsx">import { renderComponent } from &#x27;@boost/cli/lib/testing&#x27;;
import TestComponent from &#x27;../src/components/TestComponent&#x27;;

it(&#x27;renders a component&#x27;, async () =&gt; {
  expect(await renderComponent(&lt;TestComponent /&gt;)).toMatchSnapshot();
});
</code></pre><h3 id="runcommand"><code>runCommand</code></h3><blockquote><p>async runCommand&lt;O, P&gt;(command: Command, params: P, options?: O): Promise&lt;string&gt;</p></blockquote><p>Runs a <code>Command</code> outside the context of a <code>Program</code>, but mimics similar functionality, including
React component rendering. Params are required as they&#x27;re passed to the run method, while options
are optional and assume class properties have been defined. Also, the <code>exit</code> and <code>log</code> methods have
been mocked with Jest spies so that they can be asserted.</p><pre><code class="language-ts">import { runCommand } from &#x27;@boost/cli/lib/testing&#x27;;
import TestCommand from &#x27;../src/commands/TestCommand&#x27;;

it(&#x27;runs a command&#x27;, async () =&gt; {
  const command = new TestCommand();

  expect(await runCommand(command, [&#x27;foo&#x27;, &#x27;bar&#x27;, &#x27;baz&#x27;])).toMatchSnapshot();
  expect(command.log).toHaveBeenCalled();
});
</code></pre><blockquote><p>Since there is no <code>Program</code> context, any functionality that requires a program will fail. If
needed, use <code>runProgram()</code> instead.</p></blockquote><h3 id="runtask"><code>runTask</code></h3><blockquote><p>runTask&lt;A, R, T extends TaskContext&gt;(task: (this: T, ...args: A) =&gt; R, args: A, context?: T): R</p></blockquote><p>Runs a task function outside the context of a <code>Command</code>, in complete isolation. A mock command
context is provided with standard defaults, and can be customized through the 3rd argument.</p><pre><code class="language-ts">import { runTask } from &#x27;@boost/cli/lib/testing&#x27;;
import testTask from &#x27;../src/tasks/testTask&#x27;;

it(&#x27;runs a task&#x27;, async () =&gt; {
  const context = {
    log: jest.fn(),
  };

  expect(await runTask(testTask, [&#x27;foo&#x27;, &#x27;bar&#x27;, &#x27;baz&#x27;], context)).toMatchSnapshot();
  expect(context.log).toHaveBeenCalled();
});
</code></pre><h3 id="runprogram"><code>runProgram</code></h3><blockquote><p>async runProgram(program: Program, argv: string[]): Promise&lt;{ code: ExitCode; output: string;
outputStripped: string }&gt;</p></blockquote><p>Runs a <code>Program</code> as if it were ran on the command line, including middleware, commands, success and
failuer states, and more. Utilizes mocked streams to capture and return standard output and ANSI
stripped output. Failed runs will not throw and instead will render a failure output.</p><pre><code class="language-ts">import { runProgram } from &#x27;@boost/cli/lib/testing&#x27;;
import Program from &#x27;../src/program&#x27;;

it(&#x27;runs a program&#x27;, async () =&gt; {
  const program = new Program();

  const { code, output } = await runProgram(program, [&#x27;cmd&#x27;, &#x27;--foo&#x27;, &#x27;123&#x27;, &#x27;bar&#x27;]);

  expect(output).toMatchSnapshot();
  expect(code).toBe(0);
});
</code></pre></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/milesj/boost/edit/master/website/docs/cli.mdx" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/args"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Arguments</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/common"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Common utilities »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_3SO_"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation" class="table-of-contents__link">Installation</a></li><li><a href="#environment-variables" class="table-of-contents__link">Environment variables</a></li><li><a href="#events" class="table-of-contents__link">Events</a></li><li><a href="#cli" class="table-of-contents__link">CLI</a></li><li><a href="#program" class="table-of-contents__link">Program</a><ul><li><a href="#package-integration" class="table-of-contents__link">Package integration</a></li><li><a href="#stand-alone" class="table-of-contents__link">Stand-alone</a></li><li><a href="#multi-command" class="table-of-contents__link">Multi-command</a></li><li><a href="#middleware" class="table-of-contents__link">Middleware</a></li></ul></li><li><a href="#commands" class="table-of-contents__link">Commands</a><ul><li><a href="#config" class="table-of-contents__link">Config</a></li><li><a href="#options" class="table-of-contents__link">Options</a></li><li><a href="#params" class="table-of-contents__link">Params</a></li><li><a href="#rest-args" class="table-of-contents__link">Rest args</a></li><li><a href="#sub-commands" class="table-of-contents__link">Sub-commands</a></li><li><a href="#rendering-components" class="table-of-contents__link">Rendering components</a></li><li><a href="#shorthand-registration" class="table-of-contents__link">Shorthand registration</a></li></ul></li><li><a href="#tasks" class="table-of-contents__link">Tasks</a></li><li><a href="#categories" class="table-of-contents__link">Categories</a></li><li><a href="#logging" class="table-of-contents__link">Logging</a></li><li><a href="#themes" class="table-of-contents__link">Themes</a></li><li><a href="#components" class="table-of-contents__link">Components</a><ul><li><a href="#style" class="table-of-contents__link"><code>Style</code></a></li><li><a href="#header" class="table-of-contents__link"><code>Header</code></a></li><li><a href="#help" class="table-of-contents__link"><code>Help</code></a></li><li><a href="#failure" class="table-of-contents__link"><code>Failure</code></a></li></ul></li><li><a href="#test-utilities" class="table-of-contents__link">Test utilities</a><ul><li><a href="#mockstreams" class="table-of-contents__link"><code>mockStreams</code></a></li><li><a href="#mockprogram" class="table-of-contents__link"><code>mockProgram</code></a></li><li><a href="#rendercomponent" class="table-of-contents__link"><code>renderComponent</code></a></li><li><a href="#runcommand" class="table-of-contents__link"><code>runCommand</code></a></li><li><a href="#runtask" class="table-of-contents__link"><code>runTask</code></a></li><li><a href="#runprogram" class="table-of-contents__link"><code>runProgram</code></a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div>Copyright © 2020 Miles Johnson. Built with <a href="https://docusaurus.io/">Docusaurus</a>. Icon by <a href="https://thenounproject.com/search/?q=boost&i=1420345">Chameleon Design</a>.</div></div></div></footer></div>
<script src="/styles.258a4895.js"></script>
<script src="/runtime~main.c839f7c1.js"></script>
<script src="/main.aad79896.js"></script>
<script src="/1.bebaefbd.js"></script>
<script src="/2.7ed9c09b.js"></script>
<script src="/27.e0fa85a5.js"></script>
<script src="/28.5b51cd4f.js"></script>
<script src="/935f2afb.421c7848.js"></script>
<script src="/17896441.c3526068.js"></script>
<script src="/ba61d949.f285eb4f.js"></script>
</body>
</html>